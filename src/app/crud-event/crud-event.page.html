<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Compromisso</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>

  <!-- <pre>{{ event | json }}</pre> -->
  <!-- <pre>{{ eventAt | json }}</pre> -->

  <form #crudEvent="ngForm">

    <ion-list>

      <ion-item>
        <ion-label>Tipo *</ion-label>
        <ion-select [value]="event.tipo" placeholder="Tipo" [(ngModel)]="event.tipo" name="crudEvent.tipo" required>
          <ion-select-option *ngIf="mode != 'Aula'" value="Prova">Prova</ion-select-option>
          <ion-select-option *ngIf="mode != 'Aula'" value="Trabalho">Trabalho</ion-select-option>
          <ion-select-option *ngIf="mode == 'Aula'" value="Aula">Aula</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item *ngIf="mode != 'Aula'">
        <ion-label>Dia *</ion-label>
        <ion-datetime display-format="DD/MM/YYYY"
          month-names="Janeiro, Fevereiro, Mar\u00e7o, Abril, Maio, Junho, Agosto, Setembro, Outubro, Novembro, Dezembro"
          month-short-names="Jan, Fev, Mar, Abr, Mai, Jun, Jul, Ago, Set, Out, Nov, Dez" picker-format="DD MMM YYYY"
          [(ngModel)]="event.at" name="crudEvent.at" required>
        </ion-datetime>
      </ion-item>

      <ion-item *ngIf="mode == 'Aula'">

          <ion-label>
            Dia da semana
          </ion-label>
  

        <ion-select placeholder="Dia da semana *" [(ngModel)]="dayOfTheWeek" name="crudEvent.dayOfTheWeek"
          (ngModelChange)="dayOfTheWeekChanged(dayOfTheWeek)" required>
          <ion-select-option value="0">Domingo</ion-select-option>
          <ion-select-option value="1">Segunda Feira</ion-select-option>
          <ion-select-option value="2">Terça Feira</ion-select-option>
          <ion-select-option value="3">Quarta Feira</ion-select-option>
          <ion-select-option value="4">Quinta Feira</ion-select-option>
          <ion-select-option value="5">Sexta Feira</ion-select-option>
          <ion-select-option value="6">Sábado</ion-select-option>
        </ion-select>

      </ion-item>

      <!-- <ion-item>
        <ion-label>Hora *</ion-label>
        <ion-datetime display-format="h:mm A"  picker-format="h:mm A" >
        </ion-datetime>
      </ion-item> -->

      <ion-item>
        <ion-label>Hora *</ion-label>
        <ion-datetime displayFormat="h:mm a" [(ngModel)]="eventAt" (ngModelChange)="hoursChanged(eventAt)"
          name="crudEvent.at" required></ion-datetime>
      </ion-item>



      <ion-item>
        <ion-label>Matéria *</ion-label>
        <ion-input clearInput name="crudEvent.materia" [(ngModel)]="event.materia" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label>Observações</ion-label>
        <ion-textarea clearInput name="crudEvent.observacoes" [(ngModel)]="event.observacoes"></ion-textarea>
      </ion-item>

      <ion-item>
        <ion-label>Notificar?</ion-label>
        <ion-checkbox name="crudEvent.alerta" [(ngModel)]="event.alerta"></ion-checkbox>
      </ion-item>

      <ion-item *ngIf="event.alerta">

        <ion-label>
          Avisar com antecedência
        </ion-label>

        <ion-select placeholder="Me avise antes" [(ngModel)]="event.earlier" name="crudEvent.event.earlier">
          <ion-select-option value="120">Duas Horas</ion-select-option>
          <ion-select-option value="60">Uma Hora</ion-select-option>
          <ion-select-option value="30">Meia Hora</ion-select-option>
          <ion-select-option value="15">Quinze Minutos</ion-select-option>
          <ion-select-option value="0">Na hora</ion-select-option>
        </ion-select>

      </ion-item>

      <ion-item>
        <ion-label>
          * obrigatório
        </ion-label>
      </ion-item>

    </ion-list>

    <ion-item>

      <ion-buttons slot="start" *ngIf="action == 'create'">
        <ion-button color="warning" (click)="sair()" expand="full">Sair
        </ion-button>
      </ion-buttons>

      <ion-buttons slot="start" *ngIf="action == 'update'">
        <ion-button color="warning" (click)="sair()" expand="full" [disabled]="crudEvent.invalid">Sair
        </ion-button>
      </ion-buttons>

      <ion-buttons slot="end" *ngIf="action == 'create'">
        <ion-button color="primary" (click)="adicionar()" expand="full" [disabled]="crudEvent.invalid">Adicionar
        </ion-button>
      </ion-buttons>

    </ion-item>

  </form>
</ion-content>